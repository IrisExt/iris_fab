{% extends 'base.html.twig' %}
{% trans_default_domain 'Comites' %}
{% block title %}{{ 'comite.liste.creercomite'|trans }}{% endblock %}
 {% block stylesheets1 %}
     <!-- modals CSS
         ============================================ -->
     <link rel="stylesheet" href="{{ asset('css/modals.css') }}">
 {% endblock %}
{% block body %}
    <div class="advanced-form-area mg-b-15">
        <div class="container-fluid">
            <div class="row">

                <div class="col-lg-12">
                    <div class="sparkline8-list shadow-reset">
                        <div class="sparkline8-hd">
                            <div class="main-sparkline8-hd">
                                <h1>{{ 'comite.liste.listecomite'|trans }}</h1>
                                <div class="sparkline8-outline-icon">
                                    <a class="btn btn-primary"
                                       href="{{ path('comite_nv') }}">{{ 'comite.liste.creercomite'|trans }}</a>
                                </div>
                            </div>
                        </div>
                        <div class="sparkline8-graph">
                            <table class="table">
                                <thead>
                                <tr>
                                    <th>{{ 'comite.form.acron'|trans }}</th>
                                    <th>{{ 'comite.form.text'|trans }}</th>
                                    <th>{{ 'comite.form.desc'|trans }}</th>
                                    <th>{{ 'comite.form.departement'|trans }}</th>
                                    <th>{{ 'comite.form.membre'|trans }}</th>
                                    <th>{{ 'comite.form.action'|trans }}</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for tg_comite in comites %}
                                    <tr>
                                        <td>{{ tg_comite.lbAcr }}</td>
                                        <td>{{ tg_comite.lbTitre }}</td>
                                        <td>{{ tg_comite.lbDesc }}</td>
                                        <td>{% for dep in tg_comite.idDepartement %}
                                                {{ dep }}.
                                            {% endfor %}
                                        </td>
                                        <td>
                                            <a href="#" data-toggle="modal" data-target="#membreModal"
                                               data-id="{{ path('membre_comite',{'idComite' : tg_comite.idComite }) }}">
                                                <i class="adminpro-icon adminpro-users"></i>
                                            </a>
                                        </td>
                                        <td>
                                            <div class="row">
                                                <div class="col-xs-3">
                                                    <a href="{{ path('comite_show', {'idComite': tg_comite.idComite}) }}">
                                                        <span class="fa fa-eye"></span> </a>
                                                </div>
                                                <div class="col-xs-2">
                                                    <a href="{{ path('comite_edit', {'idComite': tg_comite.idComite}) }}">
                                                        <span class="fa fa-edit"></span> </a>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                {% else %}
                                    <tr>
                                        <td colspan="6">no records found</td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                            <div class="footer-text-center">
                                {{ knp_pagination_render(comites) }}
                            </div>
                            {% include 'comite/gestioncomite/modal/modalMembre.html.twig' %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% block javascripts %}
        <script>
            //modal pour la création reunion
            $('#membreModal').on('show.bs.modal', function (e) {
                // récuperer la route du lien modal  data-id
                var path = $(e.relatedTarget).data('id');
                var modal_membre = $(this);
                $.ajax({
                    'url': path,
                    success: function (data) {
                        modal_membre.find('.modal-body').html(data);
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        alert('Error : ' + errorThrown);
                    }
                });
            });

        </script>
    {% endblock %}
{% endblock %}
