{% extends 'cvPersonne/menubloc.html.twig' %}
{% block stylesheets %}
    <!-- modals CSS
    ============================================ -->
    <link rel="stylesheet" href="{{ asset('css/modals.css') }}">
    <link type="text/css" rel="stylesheet" href="{{ asset('css/select2.min.css') }}">
{% endblock %}
    {% block style_menu_cv %}
        <style>

            th {
                background-color: #369;
                color: white;
                text-align: center;
            }
            hr.style-eight {
                overflow: visible;
                padding: 0;
                border: none;
                border-top: medium double #333;
                color: #333;
                text-align: center;
            }
            hr.style-eight:after {
                content: "";
                display: inline-block;
                position: relative;
                top: -0.7em;
                font-size: 1.5em;
                padding: 0 0.25em;
                background: white;
            }
            .admintab-wrap .nav-tabs > li.active > a {
                background-color: #346799;
                color: #F0FEE9;
                /*box-shadow: 0 0px 5px rgba(0, 0, 0, .6);*/
                /*z-index: 100;*/
            }
            .ui-autocomplete {
                position: absolute;
                top: 100%;
                left: 0;
                z-index: 1510 !important;
                float: left;
                display: none;
                min-width: 160px;
                width: 160px;
                padding: 5px 0;
                margin: 2px 0 0 0;
                list-style: none;
                font-size: 14px;
                text-align: left;
                background-color: #ffffff;
                border: 1px solid #cccccc;
                border: 1px solid rgba(0, 0, 0, 0.15);
                border-radius: 4px;
                -webkit-box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);
                box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);
                background-clip: padding-box;
            }

            .ui-autocomplete > li > div {
                display: block;
                padding: 3px 20px;
                clear: both;
                font-weight: normal;
                line-height: 1.42857143;
                color: #333333;
                white-space: nowrap;
            }

            .ui-state-hover,
            .ui-state-active,
            .ui-state-focus {
                text-decoration: none;
                color: #262626;
                background-color: #f5f5f5;
                cursor: pointer;
            }
            .ui-helper-hidden-accessible {
                border: 0;
                clip: rect(0 0 0 0);
                height: 1px;
                margin: -1px;
                overflow: hidden;
                padding: 0;
                position: absolute;
                width: 1px;
            }
            .organisme .nav-tabs > li, .nav-pills > li {
                float:none;
                display:inline-block;
            }

            .organisme .nav-tabs {
                text-align:center;
            }
        </style>
    {% endblock %}
       {% block titre_cv %}poste(s) actuel(s) {% endblock %}
   {% block cv %}
    <div class="col-lg-8 col-lg-offset-2">
        <div class="text-center">
        </div>
    </div>

       <div class="row">
        <div class="col-lg-12">
{#           <div class="col-lg-8 col-lg-offset-2">#}
               <div class="text-center">
                   <p> </p>
                       <div id="succes"></div>
               </div>

        <div class="admintab-wrap mg-b-40">
            <div class="organisme">
                <ul class="nav nav-tabs custom-menu-wrap custon-tab-menu-style1 tab-menu-center">
                <li class="active"><a data-toggle="tab" href="#OrganismePubFran"><img src="/img/public.png" class="img-fluid" alt="Responsive image" width="20" height="15"> Organisme publics français</a>
                </li>
                <li><a data-toggle="tab" href="#OrganismePrivFran"><span class="adminpro-icon adminpro-analytics-bridge tab-custon-ic"></span> Organisme privés français</a>
                </li>
                <li><a data-toggle="tab" href="#OrganismeEtr"><span class="adminpro-icon adminpro-analytics-bridge tab-custon-ic"></span> Organisme étrangers</a>
                </li>
            </ul>
            </div>
            <div class="row">
                 <div class="col-lg-12">
                 <div class="tab-content">
                     <div id="OrganismePubFran" class="tab-pane in active">
                            <div class="text-right">
                                <a href="#" type="button" id="addOrPubFr" class="btn btn-primary btn-xs"  data-id="{{ path('cv_org_pub_fr') }}"><i class="fa fa-plus"></i>
                                    Ajouter
                                </a>
                            </div>
                         <div class="table-responsive">
                             <table class="table table-striped table-bordered" id="user_data">
                                 <tr>
                                     <th colspan="col">Code R.N.S.R</th>
                                     <th colspan="col">Organisme</th>
                                     <th colspan="col">Laboratoire</th>
                                     <th colspan="col">Code unité</th>
                                     <th colspan="col">Code postal</th>
                                     <th colspan="col">Localité</th>
                                     <th colspan="col">Action</th>
                                 </tr>

                                 {%  for orgRnsr in tgOrganismePub %}
                                     <tr>

                                         <td>{{ orgRnsr.idOrganisme.cdRnsr.cdRnsr|default('') }}</td>
                                         <td>{{ orgRnsr.idOrganisme.LbNomFr }}</td>
                                         <td>{{ orgRnsr.idOrganisme.cdRnsr.lbLaboratoire|default('') }}</td>
                                         <td>{{ orgRnsr.idOrganisme.siret.codeUnite|default('') }}</td>
                                         <td>{{ orgRnsr.idOrganisme.cdRnsr.idAdresse.cd|default('') }}</td>
                                         <td>{{ orgRnsr.idOrganisme.cdRnsr.idAdresse.ville|default('') }}</td>
                                         <td><a href="#" id="editOrPubFr"  data-toggle="modal" data-target="#bl_PUF" data-id="{{ path('cv_org_pub_fr_show', {'idOrganisme' : orgRnsr.idOrganisme.idOrganisme}) }}" ><span class ="fa fa-edit"></span></a> |
                                             <a href="#" data-toggle="modal" data-target="#deleteLangue" id="deleteOrPubFr" data-id="{{ path('cv_org_pub_fr_delete', {'idOrganisme' : orgRnsr.idOrganisme.idOrganisme}) }}" ><span class ="fa fa-trash-o text-danger"></span></a></td>
                                     </tr>
                                  {% endfor %}
                             </table>
                         </div>
                     </div>
                     <div id="OrganismePrivFran" class="tab-pane">
                         <div class="text-right">
                             <button type="button"  id="addOrPrivFr" class="btn btn-primary btn-xs" data-toggle="modal" data-target="#bl_PRF" data-id="{{ path('cv_org_pub_fr') }}"><i class="fa fa-plus"></i>
                                 Ajouter
                             </button>
                         </div>
                         <div class="table-responsive">
                             <table class="table table-striped table-bordered" id="user_data">
                                 <tr>
                                     <th colspan="col">Siret</th>
                                     <th colspan="col">Etablissement</th>
                                     <th colspan="col">Direction service</th>
                                     <th colspan="col">Code postal</th>
                                     <th colspan="col">Localité</th>
                                     <th colspan="col">Action</th>
                                 </tr>
                                 {%  for orgSiret in tgOrganismePrv %}
                                     <tr>
                                         <td>{{ orgSiret.idOrganisme.siret }}</td>
                                         <td>{{ orgSiret.idOrganisme.LbNomFr }}</td>
                                         <td>{{ orgSiret.lbService }}</td>
                                         <td>{{ orgSiret.idOrganisme.siret.idAdresse.cd|default('') }}</td>
                                         <td>{{ orgSiret.idOrganisme.siret.idAdresse.ville|default('') }}</td>
                                         <td><a href="#" id="editOrPrivFr"  data-toggle="modal" data-target="#bl_PRF" data-id="{{ path('cv_org_priv_fr_show', {'idOrganisme' : orgSiret.idOrganisme.idOrganisme}) }}" ><span class ="fa fa-edit"></span></a> |
                                             <a href="#"  data-toggle="modal" data-target="#deleteLangue" id="deleteOrPrivFr" data-id="{{ path('cv_org_priv_fr_delete', {'idOrganisme' : orgSiret.idOrganisme.idOrganisme}) }}" ><span class ="fa fa-trash-o text-danger"></span></a></td>
                                     </tr>
                                 {% endfor %}
                             </table>
                         </div>
                     </div>
                     <div id="OrganismeEtr" class="tab-pane">
                         <div class="text-right">
                             <button type="button" id="addOrEtrFr" class="btn btn-primary btn-xs" data-toggle="modal" data-target="#bl_ETR" data-id="{{ path('cv_org_etr') }}"><i class="fa fa-plus"></i>
                                 Ajouter
                             </button>
                         </div>
                         <div class="table-responsive">
                             <table class="table table-striped table-bordered" id="user_data">
                                 <tr>
                                     <th colspan="col">Etablissement</th>
                                     <th colspan="col">Laboratoire</th>
                                     <th colspan="col">Localité</th>
                                     <th colspan="col">Pays</th>
                                     <th colspan="col">Action</th>
                                 </tr>
                                 {%  for orgEtr in tgOrganismeEtr %}
                                     <tr>
                                         <td>{{ orgEtr.idOrganisme.LbNomFr }}</td>
                                         <td>{{ orgEtr.idOrganisme.lbLaboratoire }}</td>
                                         <td>{{ orgEtr.idOrganisme.ville|default('') }}</td>
                                         <td>{{ orgEtr.idOrganisme.cdPays }}</td>
                                         <td><a href="#" id="updateOrEtr" data-toggle="modal" data-target="#bl_ETR_update"  data-id="{{ path('cv_org_etr_edit', {'idOrganisme': orgEtr.idOrganisme.idOrganisme }) }}"><span class ="fa fa-edit"></span></a> |
                                             <a href="#"  data-toggle="modal" data-target="#deleteLangue"  id="deleteOrEtr" data-id="{{ path('cv_org_etr_delete', {'idOrganisme' : orgEtr.idOrganisme.idOrganisme}) }}" ><span class ="fa fa-trash-o text-danger"></span></a></td>
                                     </tr>
                                 {% endfor %}
                             </table>
                         </div>
                     </div>
                 </div>
                 </div>
            </div>
             </div>
           </div>
        </div>
       <!-- Modal ajout -->   {% include 'cvPersonne/blocs/poste_fonction/modal/add_organisme_pub_fr.html.twig' %}
       <!-- Modal ajout -->   {% include 'cvPersonne/blocs/poste_fonction/modal/add_organisme_priv_fr.html.twig' %}
       <!-- Modal ajout -->   {% include 'cvPersonne/blocs/poste_fonction/modal/add_organisme_etr_fr.html.twig' %}
       <!-- Modal delete-->   {% include 'cvPersonne/blocs/tg_competence_langue/deleteLangue.html.twig' %}

   {% endblock %}
{% block javascripts1 %}
    <!-- modal JS
       ============================================ -->
    <script src="{{ asset('js/modal-active.js') }}"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="{{ asset('js/modal-active.js') }}"></script>
    <script src="{{ asset('js/select2.min.js') }}"></script>
    <script src="{{ asset('js/partenaires.js') }}"></script>
    <script src="{{ asset('js/organisme-cv.js') }}"></script>
{% endblock %}
{% block javascripts_add %}
     <script>
         function clearRnsr(){
                 $("#BlPartenairePufType_siret_tut_heb_puf").val("")
                 $("#select2-BlPartenairePufType_name_tut_heb_puf-container").html("")
                 $("#BlPartenairePufType_laboratoire_puf").val("")
                 $("#BlPartenairePufType_code_unite_puf").val("")
                 $("#BlPartenairePufType_adress_tut_heb_puf").val("")
                 $("#BlPartenairePufType_compl_adress_tut_heb_puf").val("")
                 $("#BlPartenairePufType_postal_code_tut_heb_puf").val("")
                 $("#BlPartenairePufType_city_tut_hub_puf").val("")
                 $("#BlPartenairePufType_country_tut_hub_puf").val("")
             }
             
         function clearSiret(){
             $("#BlPartenairePrfType_name_tut_gest_prf").val("")
             $("#BlPartenairePrfType_sigle_prf").val("")
             $("#BlPartenairePrfType_adress_tut_gest_prf").val("")
             $("#BlPartenairePrfType_compl_adress_tut_gest_prf").val("")
             $("#BlPartenairePrfType_postal_code_tut_gest_prf").val("")
             $("#BlPartenairePrfType_city_tut_g_prf").val("")
             $("#BlPartenairePrfType_country_tut_g_prf").val("")
         }

         $("#BlPartenairePufType_rnsr_puf").keyup(function(event) {
             if ($("#BlPartenairePufType_rnsr_puf").val().length > 0 || $("#BlPartenairePrfType_siret_tut_gest_prf").val() === "")
                 clearRnsr();
         });

         $("#BlPartenairePrfType_siret_tut_gest_prf").keyup(function(event) {
             if ($("#BlPartenairePrfType_siret_tut_gest_prf").val().length > 0 || input.val() === "")
                 clearSiret();
         });
     </script>

 {% endblock %}